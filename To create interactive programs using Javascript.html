<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Furniture Mall — Interactive Demo</title>
  <style>
    :root{--accent:#6b5b95;--muted:#f5f5f7;--card:#ffffff;--danger:#e63946}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, Arial; margin:0; background:linear-gradient(180deg,#fafafa,var(--muted)); color:#222}
    header{background:linear-gradient(90deg,var(--accent),#8b6fb8); color:white; padding:18px 20px; display:flex;align-items:center;gap:16px}
    header h1{font-size:20px;margin:0}
    .container{max-width:1100px;margin:20px auto;padding:0 16px}
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px;align-items:center}
    .search{flex:1;display:flex}
    .search input{flex:1;padding:10px 12px;border-radius:8px;border:1px solid #ddd}
    .filters{display:flex;gap:8px}
    select,input[type=range]{padding:8px;border-radius:8px;border:1px solid #ddd}
    .layout{display:grid;grid-template-columns:1fr 320px;gap:20px}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(17,17,17,0.06);display:flex;flex-direction:column}
    .thumb{height:150px;border-radius:8px;background-size:cover;background-position:center;margin-bottom:8px}
    .title{font-weight:600;margin:0 0 6px 0}
    .muted{color:#666;font-size:13px}
    .row{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    button{background:var(--accent);color:white;padding:8px 10px;border-radius:8px;border:0;cursor:pointer}
    button.ghost{background:transparent;color:var(--accent);border:1px solid rgba(107,91,149,0.12)}
    .cart{background:#fff;border-radius:12px;padding:12px;height:fit-content;box-shadow:0 6px 18px rgba(17,17,17,0.06)}
    .cart h3{margin:0 0 8px 0}
    .cart-item{display:flex;gap:10px;align-items:center;margin-bottom:8px}
    .cart-item img{width:56px;height:46px;object-fit:cover;border-radius:6px}
    .qty{display:flex;align-items:center;gap:6px}
    .total{font-weight:700;font-size:18px;margin-top:10px}
    .empty{color:#999;padding:20px;text-align:center}
    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center}
    .modal.open{display:flex}
    .modal-card{width:min(920px,95%);background:white;border-radius:12px;padding:18px;display:grid;grid-template-columns:1fr 320px;gap:16px}
    .gallery{display:flex;gap:8px}
    .gallery img{width:100%;border-radius:8px}
    .thumbs{display:flex;gap:8px;margin-top:8px}
    .thumbs img{width:60px;height:48px;object-fit:cover;border-radius:6px;cursor:pointer;border:2px solid transparent}
    .thumbs img.active{border-color:var(--accent)}
    @media(max-width:900px){.layout{grid-template-columns:1fr}.modal-card{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <img src="https://images.unsplash.com/photo-1540574163026-643ea20ade25?q=80&w=80&auto=format&fit=crop&ixlib=rb-4.0.3&s=5f6b8bd6224f0a3f3b2a0e7f4c5e6c12" alt="logo" style="width:44px;height:44px;border-radius:8px;object-fit:cover;border:2px solid rgba(255,255,255,0.12)">
    <h1>Furniture Mall</h1>
    <div style="margin-left:auto;display:flex;gap:12px;align-items:center">
      <div id="live-count" style="background:rgba(255,255,255,0.12);padding:6px 10px;border-radius:8px;font-weight:600">0 items</div>
      <button id="view-cart">View Cart</button>
    </div>
  </header>

  <main class="container">
    <div class="controls">
      <div class="search">
        <input id="search" placeholder="Search sofas, chairs, tables..." />
      </div>
      <div class="filters">
        <select id="category">
          <option value="all">All Categories</option>
          <option value="sofa">Sofas</option>
          <option value="chair">Chairs</option>
          <option value="table">Tables</option>
          <option value="bed">Beds</option>
        </select>
        <select id="sort">
          <option value="popular">Sort: Popular</option>
          <option value="price-asc">Price ↑</option>
          <option value="price-desc">Price ↓</option>
        </select>
        <div style="display:flex;align-items:center;gap:8px">
          <label class="muted">Max price</label>
          <input id="price" type="range" min="500" max="50000" step="100" value="50000" />
        </div>
      </div>
    </div>

    <div class="layout">
      <section>
        <div id="products" class="products"></div>
        <div id="no-results" class="empty" style="display:none">No items match your search.</div>
      </section>

      <aside class="cart">
        <h3>Cart</h3>
        <div id="cart-list"></div>
        <div id="cart-empty" class="empty">Your cart is empty.</div>
        <div id="cart-summary" style="display:none">
          <div class="total">Total: ₹<span id="cart-total">0</span></div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button id="checkout">Checkout</button>
            <button id="clear-cart" class="ghost">Clear</button>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <div id="modal" class="modal" role="dialog" aria-hidden="true">
    <div class="modal-card">
      <div>
        <div id="modal-main-img" class="gallery"></div>
        <div id="modal-thumbs" class="thumbs"></div>
      </div>
      <div>
        <h2 id="modal-title"></h2>
        <p id="modal-desc" class="muted"></p>
        <div style="margin-top:12px;font-size:18px;font-weight:700">₹ <span id="modal-price"></span></div>
        <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
          <div class="qty">
            <button id="dec" class="ghost">-</button>
            <div id="qty">1</div>
            <button id="inc" class="ghost">+</button>
          </div>
          <button id="add-to-cart">Add to Cart</button>
        </div>
        <div style="margin-top:18px">
          <button id="close-modal" class="ghost">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Sample product data
    const PRODUCTS = [
      {id:1,title:'Elegant 3-Seater Sofa',category:'sofa',price:15999,desc:'Comfortable fabric sofa with modern wooden legs.',images:[
        'https://images.unsplash.com/photo-1616627988422-2c57b2b6e0a6?q=80&w=1200&auto=format&fit=crop',
        'https://images.unsplash.com/photo-1598300054739-38d83f3b1a1c?q=80&w=1200&auto=format&fit=crop'
      ]},
      {id:2,title:'Minimal Wooden Chair',category:'chair',price:3499,desc:'Solid oak chair — sturdy and stylish.',images:[
        'https://images.unsplash.com/photo-1524758631624-e2822e304c36?q=80&w=1200&auto=format&fit=crop'
      ]},
      {id:3,title:'Round Dining Table',category:'table',price:8999,desc:'Perfect for small dining areas, seats 4 comfortably.',images:[
        'https://images.unsplash.com/photo-1567016432779-75ad2a89396b?q=80&w=1200&auto=format&fit=crop'
      ]},
      {id:4,title:'King Size Bed',category:'bed',price:21999,desc:'Luxury king bed with storage drawers.',images:[
        'https://images.unsplash.com/photo-1601933479221-8b6d7d8d3f4c?q=80&w=1200&auto=format&fit=crop'
      ]},
      {id:5,title:'Accent Armchair',category:'chair',price:4999,desc:'Velvet armchair that adds color to any room.',images:[
        '
      ]},
      {id:6,title:'Coffee Table — Marble Top',category:'table',price:6799,desc:'Sleek marble top with metal legs.',images:[
        'https://images.unsplash.com/photo-1598300054739-38d83f3b1a1c?q=80&w=1200&auto=format&fit=crop'
      ]}
    ];

    // App state
    let state = {
      products: PRODUCTS.slice(),
      cart: JSON.parse(localStorage.getItem('fm_cart')||'{}'),
      modalQty:1,
      modalProduct:null
    };

    // Helpers
    const el = id => document.getElementById(id);

    function formatPrice(n){return n.toLocaleString('en-IN')}

    // Render products
    function renderProducts(){
      const container = el('products');
      container.innerHTML = '';
      const q = el('search').value.trim().toLowerCase();
      const cat = el('category').value;
      const maxPrice = +el('price').value;
      let filtered = state.products.filter(p=>{
        if(cat!=='all' && p.category!==cat) return false;
        if(p.price>maxPrice) return false;
        if(q && !(p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q))) return false;
        return true;
      });
      const sort = el('sort').value;
      if(sort==='price-asc') filtered.sort((a,b)=>a.price-b.price);
      if(sort==='price-desc') filtered.sort((a,b)=>b.price-a.price);

      if(filtered.length===0){el('no-results').style.display='block';} else{el('no-results').style.display='none'}

      filtered.forEach(p=>{
        const card = document.createElement('div'); card.className='card';
        const thumb = document.createElement('div'); thumb.className='thumb'; thumb.style.backgroundImage=`url(${p.images[0]})`;
        card.appendChild(thumb);
        const t = document.createElement('h3'); t.className='title'; t.textContent = p.title; card.appendChild(t);
        const d = document.createElement('div'); d.className='muted'; d.textContent = p.desc; card.appendChild(d);
        const row = document.createElement('div'); row.className='row';
        const price = document.createElement('div'); price.textContent = '₹ ' + formatPrice(p.price); row.appendChild(price);
        const actions = document.createElement('div');
        const view = document.createElement('button'); view.textContent='View'; view.onclick = ()=>openModal(p.id);
        actions.appendChild(view);
        row.appendChild(actions);
        card.appendChild(row);
        container.appendChild(card);
      });
    }

    // Cart functions
    function saveCart(){localStorage.setItem('fm_cart',JSON.stringify(state.cart));}
    function addToCart(id,qty=1){
      state.cart[id] = (state.cart[id]||0) + qty;
      saveCart(); renderCart(); updateLiveCount();
    }
    function removeFromCart(id){delete state.cart[id]; saveCart(); renderCart(); updateLiveCount();}
    function clearCart(){state.cart={}; saveCart(); renderCart(); updateLiveCount();}

    function renderCart(){
      const list = el('cart-list'); list.innerHTML='';
      const ids = Object.keys(state.cart).map(Number);
      if(ids.length===0){el('cart-empty').style.display='block'; el('cart-summary').style.display='none'; return}
      el('cart-empty').style.display='none'; el('cart-summary').style.display='block';
      let total=0;
      ids.forEach(id=>{
        const p = PRODUCTS.find(x=>x.id===id);
        const q = state.cart[id];
        total += p.price*q;
        const row = document.createElement('div'); row.className='cart-item';
        const img = document.createElement('img'); img.src=p.images[0]; row.appendChild(img);
        const meta = document.createElement('div'); meta.style.flex='1';
        meta.innerHTML = `<div style="font-weight:600">${p.title}</div><div class='muted'>₹ ${formatPrice(p.price)} x ${q}</div>`;
        row.appendChild(meta);
        const ctrl = document.createElement('div'); ctrl.style.display='flex'; ctrl.style.flexDirection='column'; ctrl.style.gap='6px';
        const inc = document.createElement('button'); inc.textContent='+'; inc.onclick = ()=>{state.cart[id]++; saveCart(); renderCart(); updateLiveCount();};
        const dec = document.createElement('button'); dec.textContent='-'; dec.onclick = ()=>{state.cart[id]--; if(state.cart[id]<=0) removeFromCart(id); else{saveCart(); renderCart(); updateLiveCount();}};
        const del = document.createElement('button'); del.textContent='Remove'; del.className='ghost'; del.onclick = ()=>removeFromCart(id);
        ctrl.appendChild(inc); ctrl.appendChild(dec); ctrl.appendChild(del);
        row.appendChild(ctrl);
        list.appendChild(row);
      });
      el('cart-total').textContent = formatPrice(total);
    }

    function updateLiveCount(){
      const count = Object.values(state.cart).reduce((s,n)=>s+n,0);
      el('live-count').textContent = `${count} item${count!==1?'s':''}`;
    }

    // Modal
    function openModal(id){
      const p = PRODUCTS.find(x=>x.id===id); state.modalProduct = p; state.modalQty = 1;
      el('modal-title').textContent = p.title; el('modal-desc').textContent = p.desc; el('modal-price').textContent = formatPrice(p.price);
      el('qty').textContent = state.modalQty;
      // images
      const main = el('modal-main-img'); main.innerHTML = '';
      const img = document.createElement('img'); img.src = p.images[0]; img.style.maxHeight='320px'; img.style.width='100%'; main.appendChild(img);
      const thumbs = el('modal-thumbs'); thumbs.innerHTML = '';
      p.images.forEach((src,idx)=>{ const t = document.createElement('img'); t.src=src; if(idx===0) t.classList.add('active'); t.onclick = ()=>{ main.querySelector('img').src = src; thumbs.querySelectorAll('img').forEach(x=>x.classList.remove('active')); t.classList.add('active'); } ; thumbs.appendChild(t); });
      el('modal').classList.add('open'); el('modal').setAttribute('aria-hidden','false');
    }

    // Wire UI events
    document.addEventListener('DOMContentLoaded',()=>{
      el('search').addEventListener('input',renderProducts);
      el('category').addEventListener('change',renderProducts);
      el('sort').addEventListener('change',renderProducts);
      el('price').addEventListener('input',renderProducts);
      el('view-cart').addEventListener('click',()=>{window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'})});
      el('clear-cart').addEventListener('click',clearCart);
      el('checkout').addEventListener('click',()=>{
        if(Object.keys(state.cart).length===0){alert('Your cart is empty');return}
        alert('Checkout - thank you!\n(Checkout in this demo is a placeholder)'); clearCart();
      });

      // modal controls
      el('close-modal').addEventListener('click',()=>{el('modal').classList.remove('open'); el('modal').setAttribute('aria-hidden','true')});
      el('inc').addEventListener('click',()=>{state.modalQty++; el('qty').textContent=state.modalQty});
      el('dec').addEventListener('click',()=>{ if(state.modalQty>1) state.modalQty--; el('qty').textContent=state.modalQty });
      el('add-to-cart').addEventListener('click',()=>{ addToCart(state.modalProduct.id, state.modalQty); el('modal').classList.remove('open'); el('modal').setAttribute('aria-hidden','true')});

      // init
      renderProducts(); renderCart(); updateLiveCount();
    });
  </script>
</body>
</html>
