<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DreamWood Furniture Mall</title>
  <!-- Correct link to external CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body bgcolor="#f5f5f5" text="#333">

  <header>
    <center>
      <h1>DreamWood Furniture Mall</h1>
      <p><b>Your comfort, our craft.</b></p>
      <hr width="80%">
    </center>
  </header>

  <nav>
    <center>
      <a href="#home">Home</a> |
      <a href="#about">About Us</a> |
      <a href="product.html">Products</a> |
      <a href="#contact">Contact</a>
    </center>
    <hr width="80%">
  </nav>

  <section id="home">
    <h2>Welcome to DreamWood</h2>
    <p>We provide top-quality wooden furniture for homes, offices, and outdoor spaces. Explore our latest collection crafted with care and precision.</p>
  </section>

  <section id="about">
    <h2>About Us</h2>
    <p>DreamWood Furniture Mall is a trusted name in furniture design and craftsmanship. We have been serving happy customers since 1995, offering durable and stylish furniture for every need.</p>
  </section>

  <section id="contact">
    <h2>Contact Us</h2>
    <p><b>Address:</b> 21, Woodland Road, Nagpur, Maharashtra</p>
    <p><b>Phone:</b> +91 98765 43210</p>
    <p><b>Email:</b> info@dreamwoodmall.com</p>
  </section>

  <p>Please fill out the form below to register.</p>

  <form id="registerForm" action="/submit-registration" method="post" novalidate>
    <fieldset>
      <legend>Login Details</legend>

      <div class="form-row">
        <label for="name">Full Name:</label><br>
        <input type="text" id="name" name="user_name" required>
        <div class="error" id="error-name" aria-live="polite"></div>
      </div>
      <br>

      <div class="form-row">
        <label for="email">Email Address:</label><br>
        <input type="email" id="email" name="user_email" required>
        <div class="error" id="error-email" aria-live="polite"></div>
      </div>
      <br>

      <div class="form-row">
        <label for="pass">Create Password (min. 8 characters):</label><br>
        <div style="display:flex;gap:8px;align-items:center;">
          <input type="password" id="pass" name="user_password" minlength="8" required>
          <button type="button" id="togglePass" aria-pressed="false" title="Show/Hide password">Show</button>
        </div>
        <meter id="passStrength" min="0" max="4" value="0" style="width:100%; margin-top:6px;"></meter>
        <div class="error" id="error-pass" aria-live="polite"></div>
      </div>
      <br>

      <div class="form-row">
        <label for="confirm_pass">Confirm Password:</label><br>
        <div style="display:flex;gap:8px;align-items:center;">
          <input type="password" id="confirm_pass" name="confirm_password" required>
          <button type="button" id="toggleConfirm" aria-pressed="false" title="Show/Hide password">Show</button>
        </div>
        <div class="error" id="error-confirm" aria-live="polite"></div>
      </div>

    </fieldset>

    <br>

    <fieldset>
      <legend>Personal Information</legend>

      <div class="form-row">
        <label for="phone">Phone Number:</label><br>
        <input type="tel" id="phone" name="user_phone" placeholder="+91XXXXXXXXXX">
        <div class="error" id="error-phone" aria-live="polite"></div>
      </div>
      <br>

      <div class="form-row">
        <label for="dob">Date of Birth:</label><br>
        <input type="date" id="dob" name="user_dob" max="">
        <div class="error" id="error-dob" aria-live="polite"></div>
      </div>
      <br>

      <div>
        <p>Gender:</p>
        <label><input type="radio" name="gender" value="male"> Male</label>
        <label><input type="radio" name="gender" value="female"> Female</label>
        <label><input type="radio" name="gender" value="other"> Other</label>
      </div>

    </fieldset>

    <br>

    <fieldset>
      <legend>Agreement</legend>
      <div>
        <label>
          <input type="checkbox" id="terms" name="terms" required> I agree to the
          <a href="#" target="_blank">terms and conditions</a>.
        </label>
      </div>
      <div class="error" id="error-terms" aria-live="polite"></div>
    </fieldset>

    <br>

    <div style="display:flex;gap:10px;">
      <button id="submitBtn" type="submit" disabled>Register</button>
      <button type="reset" id="resetBtn">Clear Form</button>
    </div>

    <div id="formMessage" role="status" aria-live="polite" style="margin-top:12px;"></div>
  </form>

  <footer>
    <hr width="80%">
    <center>
      <p>&copy; 2025 DreamWood Furniture Mall | All Rights Reserved</p>
    </center>
  </footer>

  <!-- Internal JavaScript: event listeners & handlers -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Elements
      const form = document.getElementById('registerForm');
      const nameInput = document.getElementById('name');
      const emailInput = document.getElementById('email');
      const passInput = document.getElementById('pass');
      const confirmInput = document.getElementById('confirm_pass');
      const phoneInput = document.getElementById('phone');
      const dobInput = document.getElementById('dob');
      const termsCheckbox = document.getElementById('terms');
      const submitBtn = document.getElementById('submitBtn');
      const resetBtn = document.getElementById('resetBtn');
      const formMessage = document.getElementById('formMessage');
      const passStrength = document.getElementById('passStrength');

      const errorName = document.getElementById('error-name');
      const errorEmail = document.getElementById('error-email');
      const errorPass = document.getElementById('error-pass');
      const errorConfirm = document.getElementById('error-confirm');
      const errorPhone = document.getElementById('error-phone');
      const errorDob = document.getElementById('error-dob');
      const errorTerms = document.getElementById('error-terms');

      // Set max DOB to today - 13 years (basic age guard)
      (function setMaxDOB() {
        const today = new Date();
        const year = today.getFullYear() - 13;
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        dobInput.max = `${year}-${month}-${day}`;
      })();

      // Simple validators
      function validateEmail(email) {
        // basic regex, fine for UI validation (not authoritative)
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      function validatePhone(phone) {
        // Accepts 10 digit Indian numbers, optionally prefixed with +91 or 0
        const cleaned = phone.replace(/\s+/g, '');
        return /^(?:\+91|0)?[6-9]\d{9}$/.test(cleaned);
      }

      function passwordStrengthScore(pw) {
        let score = 0;
        if (pw.length >= 8) score++;
        if (/[A-Z]/.test(pw)) score++;
        if (/[0-9]/.test(pw)) score++;
        if (/[\W_]/.test(pw)) score++;
        return score; // 0..4
      }

      // Toggle show/hide password buttons
      function setupToggle(btnId, inputEl) {
        const btn = document.getElementById(btnId);
        if (!btn) return;
        btn.addEventListener('click', function () {
          const isText = inputEl.type === 'text';
          inputEl.type = isText ? 'password' : 'text';
          btn.textContent = isText ? 'Show' : 'Hide';
          btn.setAttribute('aria-pressed', String(!isText));
        });
      }
      setupToggle('togglePass', passInput);
      setupToggle('toggleConfirm', confirmInput);

      // Real-time validation handlers
      emailInput.addEventListener('input', () => {
        if (!emailInput.value) {
          errorEmail.textContent = '';
          return;
        }
        errorEmail.textContent = validateEmail(emailInput.value) ? '' : 'Enter a valid email address.';
      });

      phoneInput.addEventListener('input', () => {
        if (!phoneInput.value) { errorPhone.textContent = ''; return; }
        errorPhone.textContent = validatePhone(phoneInput.value) ? '' : 'Enter a valid 10-digit Indian phone number.';
      });

      passInput.addEventListener('input', () => {
        const val = passInput.value;
        const score = passwordStrengthScore(val);
        passStrength.value = score;
        let msg = '';
        if (val.length === 0) msg = '';
        else if (val.length < 8) msg = 'Password must be at least 8 characters.';
        else msg = (score <= 1) ? 'Weak password.' : (score === 2) ? 'Moderate password.' : (score >= 3) ? 'Strong password.' : '';
        errorPass.textContent = msg;
        // also check confirm match live
        errorConfirm.textContent = (confirmInput.value && confirmInput.value !== val) ? 'Passwords do not match.' : '';
        toggleSubmitState();
      });

      confirmInput.addEventListener('input', () => {
        errorConfirm.textContent = (confirmInput.value !== passInput.value) ? 'Passwords do not match.' : '';
        toggleSubmitState();
      });

      nameInput.addEventListener('input', () => {
        errorName.textContent = nameInput.value.trim() ? '' : 'Please enter your full name.';
      });

      dobInput.addEventListener('change', () => {
        if (!dobInput.value) {
          errorDob.textContent = '';
          return;
        }
        const selected = new Date(dobInput.value);
        if (selected > new Date(dobInput.max)) {
          errorDob.textContent = 'You must be at least 13 years old.';
        } else {
          errorDob.textContent = '';
        }
      });

      termsCheckbox.addEventListener('change', () => {
        errorTerms.textContent = termsCheckbox.checked ? '' : 'You must accept the terms to register.';
        toggleSubmitState();
      });

      // Enable submit only when basic checks pass
      function toggleSubmitState() {
        const basicOk =
          nameInput.value.trim() &&
          validateEmail(emailInput.value) &&
          passwordStrengthScore(passInput.value) >= 2 && // require at least "moderate"
          passInput.value === confirmInput.value &&
          termsCheckbox.checked;
        submitBtn.disabled = !basicOk;
      }

      // Reset handler
      resetBtn.addEventListener('click', () => {
        // clear messages and password meter
        errorName.textContent = errorEmail.textContent = errorPass.textContent = errorConfirm.textContent = errorPhone.textContent = errorDob.textContent = errorTerms.textContent = '';
        formMessage.textContent = '';
        passStrength.value = 0;
        submitBtn.disabled = true;
      });

      // Final submit handler
      form.addEventListener('submit', function (e) {
        e.preventDefault();
        // Clear previous message
        formMessage.textContent = '';
        // Re-validate
        let hasError = false;

        if (!nameInput.value.trim()) { errorName.textContent = 'Enter your full name.'; hasError = true; }
        if (!validateEmail(emailInput.value)) { errorEmail.textContent = 'Enter a valid email.'; hasError = true; }
        if (passwordStrengthScore(passInput.value) < 2) { errorPass.textContent = 'Choose a stronger password (use uppercase, numbers, symbols).'; hasError = true; }
        if (passInput.value !== confirmInput.value) { errorConfirm.textContent = 'Passwords do not match.'; hasError = true; }
        if (phoneInput.value && !validatePhone(phoneInput.value)) { errorPhone.textContent = 'Enter a valid phone number.'; hasError = true; }
        if (!termsCheckbox.checked) { errorTerms.textContent = 'You must accept the terms.'; hasError = true; }

        if (hasError) {
          formMessage.textContent = 'Please fix the highlighted errors and try again.';
          formMessage.style.color = 'crimson';
          return;
        }

        // Simulate successful submission (you can replace with fetch to server)
        submitBtn.disabled = true;
        submitBtn.textContent = 'Registering...';

        // Simulate delay for UX
        setTimeout(() => {
          formMessage.textContent = 'Registration successful! Welcome to DreamWood âœ¨';
          formMessage.style.color = '#2a7a2a';
          form.reset();
          passStrength.value = 0;
          submitBtn.textContent = 'Register';
          submitBtn.disabled = true; // user must re-check terms after reset
        }, 900);
      });

      // Smooth scroll for nav links (progressive enhancement)
      document.querySelectorAll('nav a[href^="#"]').forEach(a => {
        a.addEventListener('click', function (ev) {
          ev.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      });

      // initial state
      toggleSubmitState();
    });
  </script>

  <!-- Optional small styles for inline errors (if your external CSS doesn't include them) -->
  <style>
    .error { color: #b22222; font-size: 0.9rem; margin-top: 6px; }
    #formMessage { font-weight: 600; }
    button[disabled] { opacity: 0.6; cursor: not-allowed; }
  </style>

</body>
</html>
